##### 5.17

**mysql各种集群优缺点**

1.主从架构：只是有数据备份的功能；

2.主主互备+keepalived：实现数据备份加高可用；

3.主主互备，主主下面分别挂个从；

4.A和B主主互备，把从库都挂到B下，减少IO问题；

5.MMM架构，perl编写，基于mysql主从复制，成熟高可用集群方案，由一个管理端(monitor)和多个代理端（aget）构成

优点：监控所有Master节点及Slave节点状态，当master节点出现故障，会把vip自动转移到健康节点上；更重要的是当Master节点发生故障，会自动将后端Slave节点转向备用的Master节点继续同步复制，切换过程不需要人工干预；

缺点：对ip，服务器数量有要求(至少两台服务器，2个真实ip，3个vip)；业务繁忙，数据量大的时候不是很稳定，会出现复制延时，切换失效等问题；所以MMM方案不适合应用于对数据安全性要求很高，并读写频繁的环境中。

数据量大的时候，会有主从数据不同步的问题；

6.MHA架构，搭建起来比较麻烦，至少三台机器，淘宝进行过二次开发，可以用两台机器；

**读写分离中间件：**

7.mysqlproxy：通过lua脚本实现的读写分离，不太稳定，官网不建议用；

8.Amoeba：致力于mysql分布式数据库前端代理层，它主要在应用层，访问mysql的时候充当SQL路由器的功能，依据用户事先设置的规则，将SQL请求发送到特定的数据库上执行。基于此可以实现负载均衡、[读写分离](http://baike.baidu.com/view/3372624.htm)、高可用性等需求。Amoeba相当于一个SQL请求的[路由器](http://baike.baidu.com/view/1360.htm)，目的是为负载均衡、读写分离、高可用性提供机制，而不是完全实现它们。